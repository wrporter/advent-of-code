package maze

import (
	"fmt"
	"testing"
)

func TestDonutMaze_MinSteps(t *testing.T) {
	tests := []struct {
		maze []string
		want int
	}{
		{
			[]string{
				"         A           ",
				"         A           ",
				"  #######.#########  ",
				"  #######.........#  ",
				"  #######.#######.#  ",
				"  #######.#######.#  ",
				"  #######.#######.#  ",
				"  #####  B    ###.#  ",
				"BC...##  C    ###.#  ",
				"  ##.##       ###.#  ",
				"  ##...DE  F  ###.#  ",
				"  #####    G  ###.#  ",
				"  #########.#####.#  ",
				"DE..#######...###.#  ",
				"  #.#########.###.#  ",
				"FG..#########.....#  ",
				"  ###########.#####  ",
				"             Z       ",
				"             Z       ",
			},
			23,
		},
		{
			[]string{
				"                   A               ",
				"                   A               ",
				"  #################.#############  ",
				"  #.#...#...................#.#.#  ",
				"  #.#.#.###.###.###.#########.#.#  ",
				"  #.#.#.......#...#.....#.#.#...#  ",
				"  #.#########.###.#####.#.#.###.#  ",
				"  #.............#.#.....#.......#  ",
				"  ###.###########.###.#####.#.#.#  ",
				"  #.....#        A   C    #.#.#.#  ",
				"  #######        S   P    #####.#  ",
				"  #.#...#                 #......VT",
				"  #.#.#.#                 #.#####  ",
				"  #...#.#               YN....#.#  ",
				"  #.###.#                 #####.#  ",
				"DI....#.#                 #.....#  ",
				"  #####.#                 #.###.#  ",
				"ZZ......#               QG....#..AS",
				"  ###.###                 #######  ",
				"JO..#.#.#                 #.....#  ",
				"  #.#.#.#                 ###.#.#  ",
				"  #...#..DI             BU....#..LF",
				"  #####.#                 #.#####  ",
				"YN......#               VT..#....QG",
				"  #.###.#                 #.###.#  ",
				"  #.#...#                 #.....#  ",
				"  ###.###    J L     J    #.#.###  ",
				"  #.....#    O F     P    #.#...#  ",
				"  #.###.#####.#.#####.#####.###.#  ",
				"  #...#.#.#...#.....#.....#.#...#  ",
				"  #.#####.###.###.#.#.#########.#  ",
				"  #...#.#.....#...#.#.#.#.....#.#  ",
				"  #.###.#####.###.###.#.#.#######  ",
				"  #.#.........#...#.............#  ",
				"  #########.###.###.#############  ",
				"           B   J   C               ",
				"           U   P   P               ",
			},
			58,
		},
		{
			[]string{
				"                                       T   L           B   P       C       B Z           M                                     ",
				"                                       I   P           A   P       U       N Z           S                                     ",
				"  #####################################.###.###########.###.#######.#######.#.###########.###################################  ",
				"  #.......#.....#...#.....#.#.#.....#.#.#.........#.......#.....#.....#.#.....#.#...#.#.....#...#.....#.#.....#.#.#...#.....#  ",
				"  ###.#######.#.###.#.#.###.#.#.#####.#.#########.#.#.#.#####.#####.###.###.###.#.###.#.#####.###.#####.###.###.#.#.###.#.###  ",
				"  #.#.#.#...#.#...#...#...#.#.#.#.........#...#...#.#.#.....#.#.#.........#.........#.#.......#.....#...#...#.#.......#.#...#  ",
				"  #.#.#.#.#######.#######.#.#.#.#######.###.###.###.###.#.###.#.#.###.#########.#.###.###.###.#.#####.###.###.#.#########.###  ",
				"  #.......#.#...#...#.......#.......#.....#...#...#.#.#.#.#.....#.#.....#.#.#...#...#...#...#.........#...#.......#.#...#...#  ",
				"  #####.###.###.#.#########.#.#.#######.###.#.#.#.#.#.#####.#.#.###.#####.#.#.#######.#.#.#####.###.#####.#.###.#.#.###.#.#.#  ",
				"  #...#...#.#...........#.#.#.#...#.#.....#.#.#.#.#.......#.#.#...#.........#...#.#...#.....#.....#.#.#.......#.#.#.#.....#.#  ",
				"  #.#.#.###.###.###.###.#.#.###.###.#####.#.#.###.#.#############.#######.#####.#.#.#######.#####.###.#.#.###.#####.###.#.###  ",
				"  #.#...#.#.#...#...#.....................#.#...#.#.#.#...........#...........#...#.......#.#...#.#.#...#.#.....#.#.#...#...#  ",
				"  ###.#.#.#.###.###.#######.#.#.#######.###.###.#.#.#.#####.#.#.###.###.#.#######.#.###.#.#####.###.#.#######.###.#.###.###.#  ",
				"  #.#.#.#...#.#.#.#.#.#.#.#.#.#.....#...#.....#...#...#.#...#.#.#.#.#.#.#...#.#...#...#.#...#.#.#.....#.#...#...#.#.#.#...#.#  ",
				"  #.#.###.###.###.###.#.#.#.###.#######.###.#.#####.###.###.#.###.#.#.###.###.###.#.#####.###.#.#.#####.#.#######.#.#.#.#####  ",
				"  #...#...#...#...#...#.......#.#.#...#...#.#.....#.#.#.....#.#.#.......#...#.....#.....#.............#.....#...#...#.#...#.#  ",
				"  ###.###.###.###.###.#.###.#####.###.#.#######.#.#.#.#####.###.###.#####.###.###.#.#####.#####.#######.#######.#.###.###.#.#  ",
				"  #...#.....#...#.......#...#.#.#...#.........#.#.#.#...#.......#...#.#.....#...#.#.#.......#.....#...#.........#...#...#...#  ",
				"  ###.###.###.#####.###.#.#.#.#.#.###.#.#.#######.#.#.#####.#.#####.#.#######.###.#####.#.###.###.#.###.#########.###.#####.#  ",
				"  #.#.#.#...#...#.#...#.#.#.#.....#.#.#.#.#...#.#.#.......#.#.#...........#...#.....#...#.#.....#.........#.....#.#.........#  ",
				"  #.#.#.###.#.###.###############.#.###.#####.#.#.#.###.#####.#######.###########.#.#####.#######.#.###.#.###.###.###.#######  ",
				"  #.#.#.#.......#...#.....#.#...#.......#.........#.#.#.#.....#...#...#.......#...#.#.#.........#.#.#...#.#.#.#.#.#.........#  ",
				"  #.#.#.###.#.#####.###.###.###.#.#####.###.#######.#.###.#.#####.#.#####.#######.###.#.###########.#.#.###.#.#.#.###.#######  ",
				"  #.........#.#.......#.#.#.......#.......#.....#.#.....#.#.#.#...........#.........#.............#.#.#.#.#.......#.....#.#.#  ",
				"  #####.###.#######.###.#.#######.#.#.#.###.###.#.###.#####.#.#.#####.#.#########.#######.#.#####.#######.###.###.#.#####.#.#  ",
				"  #...#.#.....#.#.....#.#...#...#.#.#.#...#.#.#...#.......#.#.#.#.....#.#.#...#...#.....#.#.....#...#.....#.#.#...#.....#.#.#  ",
				"  ###.#.#######.###.#.#.#.###.###########.###.###.#.#.#####.#.###.#.#####.###.###.#.#.###.#############.###.#####.#####.#.#.#  ",
				"  #...#...#.#...#...#.#.....#...........#.#.#.....#.#...#.....#...#.....#.........#.#...#.#.#.....#.#.....#.....#.........#.#  ",
				"  ###.#.###.###.#.#####.#####.###.#####.#.#.#####.#.#######.#########.#######.#.###.###.#.#.#.#####.#####.###.###.#####.###.#  ",
				"  #...#...#.#...#...#.#...#...#.....#...#...#...#.#.#.....#...#.#.#.........#.#.#...#.#.............#...........#.....#.#...#  ",
				"  ###.#.###.###.#.###.#.###############.#.###.###.#.#.###.#.###.#.#.###.#######.###.#.###.#.#.#############.#####.###.###.###  ",
				"  #...#.....#.....#.....#...#.#.......#...#.#...#.#...#.#.#.#...#.....#.#...#.....#.....#.#.#.#.#.#.#.#.....#.......#.#.....#  ",
				"  #.#####.###.#.#######.#.###.#######.###.#.#.#.#.#.###.#.#.###.#####.#####.###.#.###.###.#####.#.#.#.###.#.#####.#######.#.#  ",
				"  #.....#...#.#...#.#.#...#...#.....#.....#...#...#.#.....#.....#.....#.........#.#.....#...#.....#...#...#.#.#...#.#.....#.#  ",
				"  ###.#.#.###.#####.#.#.#.#.#####.#####.#####.#######.#########.###.#########.#########.#####.#.#####.#####.#.###.#.#####.###  ",
				"  #.#.#...#.#...#.#...#.#.#.#.#...#    F     I       C         B   B         J         K    #.#.#...#.....#...#...#...#.....#  ",
				"  #.#####.#.#.###.###.###.#.#.###.#    X     O       U         A   N         J         N    ###.#.#####.###.#####.###.###.###  ",
				"  #.........................#.....#                                                         #.....#.........#.......#.....#.#  ",
				"  #.#.#.#####.#############.#.###.#                                                         ###.#.#.###.###.#.#####.#.#.###.#  ",
				"  #.#.#.....#.#.#...#...#...#...#.#                                                         #...#.....#.#.....#.....#.#.#....QD",
				"  #.#.#.#######.###.#.#.#.###.#.#.#                                                         ###.#####.#######.#####.#.#.###.#  ",
				"MX..#.#...#.#.....#...#...#...#.#..PP                                                     TI..#.....#.#...#...#.#.....#...#.#  ",
				"  #####.###.###.###.#.#########.#.#                                                         #.###.###.#.#.#####.#########.#.#  ",
				"  #...#...#...#.#.#.#...........#.#                                                         #.....#.#.#.#.#...#...#.#...#...#  ",
				"  #.#######.###.#.#################                                                         #######.###.#####.#.###.#.#######  ",
				"  #.......#...................#.#.#                                                       QD..........#...................#..HM",
				"  #.#.###.#.#.#.#######.#.###.#.#.#                                                         #.###.###.#.#.#.###########.###.#  ",
				"  #.#...#...#.#.#...#...#...#.....#                                                         #...#...#...#.#.#...#.....#...#.#  ",
				"  #####.#.#.###.#.#.#######.###.#.#                                                         #.###.#####.#######.#.#.###.###.#  ",
				"  #.....#.#...#...#.#.#...#.#...#.#                                                       LP..#...#...#.#.........#.....#....OL",
				"  #.#.###.###########.#.#######.###                                                         #########.#####.###.#########.#.#  ",
				"HG..#.#...#.#...#.#...#...#...#....DY                                                       #...#.........#.#.............#.#  ",
				"  #.#######.###.#.#.###.###.#######                                                         #.#####.#.#.#####################  ",
				"  #.#.....................#...#...#                                                         #.....#.#.#.....#...#.....#......FG",
				"  ###.#######.#.#.#.#.#.#.#.#.#.#.#                                                         #####.###.#########.#.#.###.#.###  ",
				"  #...#.....#.#.#.#.#.#.#...#...#.#                                                         #.....#.#...#.#.#.#...#...#.#...#  ",
				"  ###.###.#.#####.###.#####.#####.#                                                         #####.#.#.###.#.#.#.#####.#.#.###  ",
				"  #.......#...#.....#...#.....#.#.#                                                       QQ....................#.#.#...#...#  ",
				"  #########.#.#.#.###.###.#.#.#.#.#                                                         #####.###############.#.#.#####.#  ",
				"AJ..........#.#.#...#.#...#.#.#....OL                                                     WP..#...#.................#.#.#.#.#  ",
				"  ###############.#########.###.#.#                                                         #.#######.###.#.###.###.###.#.###  ",
				"LQ..#.........#.........#.#.#.#.#.#                                                         #.....#.....#.#...#...#.....#....FN",
				"  #.#.#.#################.###.#####                                                         #.#.#####.#.###.###########.###.#  ",
				"  #...#.....#.......#.#.#.#.#.....#                                                         #.#.#.....#.#...#...#.#.#...#...#  ",
				"  #.#.#.#.#.###.#.###.#.#.#.#####.#                                                         ###.#.#####.###.###.#.#.#.###.#.#  ",
				"  #.#.#.#.#.#.#.#...#.#.....#.#.#..HM                                                       #.#...#.#.#.#.#.#...#.#.#.....#.#  ",
				"  ###.#.###.#.#.#####.#####.#.#.#.#                                                         #.#####.#.###.#####.#.#.#########  ",
				"  #.#.#.#.#.......................#                                                       AJ..#.......................#.....#  ",
				"  #.#####.#######################.#                                                         #.#.###.#.#.###.###.#####.#.###.#  ",
				"QQ......................#.......#.#                                                         #.....#.#.#.#.....#.#.......#...#  ",
				"  #.#####.###.#####.#.###.#####.###                                                         #.#####.#.#######.#######.###.###  ",
				"  #.#.#.#.#.....#...#...#.#.....#..IC                                                       #.#...#.#.....#...#.....#.#.#.#.#  ",
				"  #.#.#.#.#.#########.###.#.#####.#                                                         ###.#############.#.#.#####.#.#.#  ",
				"  #.#.#.#.#.#.............#.....#.#                                                         #...#.#.....#...#.#.#.......#....DY",
				"  ###.#.###########.###########.#.#                                                         #.###.#.#####.#########.#########  ",
				"  #.#.....#.#.#.#.#.#.#...#...#...#                                                       MX....#.......#.................#..IO",
				"  #.###.###.#.#.#.###.###.###.###.#                                                         ###.#.#####.#.###.#.###.#.#.#.#.#  ",
				"RW..#.....#...................#...#                                                         #...#...#.#...#...#.#...#.#.#.#.#  ",
				"  #.#.#.#.###.###.#####.#.#.#######                                                         #.###.###.#.###.#####.#.#####.#.#  ",
				"  #.#.#.#.....#.......#.#.#...#....LQ                                                       #...#.#.#.....#.....#.#.#.......#  ",
				"  #.#.#####.#.#####.#####.#.#.###.#                                                         ###.#.#.#######.###########.###.#  ",
				"  #.......#.#.#.#.......#.#.#.#...#                                                         #...........#...#.......#...#...#  ",
				"  #.#.#######.#.###.#.###.###.###.#                                                         ###.#.#####.###.#.#######.#####.#  ",
				"  #.#.....#...#.#...#.#...#.......#                                                         #...#.....#.#.....#...#...#.....#  ",
				"  ###.#####.#.#.###.#####.###.###.#    F         H       U       I     R     F         M    #.#######.#.###.#.#.###########.#  ",
				"  #...#...#.#.#.........#.#.....#.#    G         G       S       F     W     N         S    #.....#.#.#.#.#.#.......#.......#  ",
				"  ###.#.#####.###.###.###.#.#####.#####.#########.#######.#######.#####.#####.#########.#######.###.###.#.#.#####.#.#######.#  ",
				"  #.........#...#.#...#.#.#.#.#...#.......#.......#.#.#.....#.....#.........#.#.............#...#.......#...#.#...#.#.......#  ",
				"  #.###.#############.#.###.#.#.#.###.###.#####.###.#.#.#####.###########.###.###.###############.#.#####.#.#.###.#####.###.#  ",
				"  #.#...#.......#.........#.#...#...#...#...#.....#.....#.#.......#...#.#...#.#.#.#...........#.#.#.#.....#...#.#.#.#...#...#  ",
				"  #.###.#.#####.#.#.###.#######.#####.#####.#.#.#####.#.#.###.###.###.#.#.###.#.#.#.###.#.###.#.###.###.#.###.#.###.###.###.#  ",
				"  #.#.#.#.#.#.....#.#.....#.#.#...#.....#.#.#.#...#...#.#...#.#.....#.......#...#.#...#.#.#.....#.#...#.#.#.........#.....#.#  ",
				"  ###.#####.###.#.#####.###.#.###.###.#.#.#####.#####.###.#########.#.#.###.#.#.#.#.###.#.###.###.#.#########.#.#.#########.#  ",
				"  #.#...........#.#.......#...#...#...#.#.....#.#.#...#.#...#.......#.#...#.#.#.#...#...#...#...#.....#...#...#.#.#.#.#.#...#  ",
				"  #.#.###.#.#.#.###########.#########.#######.#.#.#.#.###.#.#.###########.#####.#####.#.#.#.#############.#.#.###.#.#.#.###.#  ",
				"  #...#...#.#.#.#...#...#.....#...#.....#.........#.#.#...#.#.....#.#.....#.#.......#.#.#.#.#.#.#...#.....#.#.#.......#.....#  ",
				"  #.###.#####.#.###.###.###.#####.###.#####.#.###.###.#.###.#.#####.#.#.###.###.#.#####.#####.#.#.###.#####.#.###.#.###.###.#  ",
				"  #.#...#.....#...#...................#...#.#...#...#.....#.#.......#.#.....#...#.#.#.#...#.#.#.........#.#.#.#...#.#...#.#.#  ",
				"  #####.#####.#####.#.###.#.#.#.#.###.#.#####.#############.#.#.###.#####.#####.###.#.#.#.#.#.###.###.#.#.###.###.#####.#.###  ",
				"  #.....#...#.#.....#...#.#.#.#.#...#.....#...#.#.#.........#.#.#...#.#...#.#.....#.#...#...#.#...#.#.#.#...#.#.#.....#.....#  ",
				"  #.###.###.#######.#.#######.###.###.#######.#.#.###.###.#######.###.#.###.###.###.###.#####.#.###.#####.###.#.###.###.###.#  ",
				"  #.#...#...#.#.....#.#.#.....#.#.#...#.#...#...#.....#.........#.....#...#.#.#.......#...........#.......#.......#...#.#...#  ",
				"  #.#.#####.#.#####.###.#.###.#.#.###.#.#.###.#.#####.###.#########.###.###.#.#.#.#####.###.#########.#.#.#.###.#######.#.###  ",
				"  #.#.#...............#...#.#...#.#.........#.#.....#.#.#.#.#.#.#...#.....#.#...#...#.....#...........#.#.#.#.........#.#.#.#  ",
				"  #.###.#.###.#.#.#.###.#.#.###.#####.###.#.#.#######.#.###.#.#.#.#######.#.#.###.#####.#####.###.###.#.#.#####.#######.###.#  ",
				"  #...#.#.#...#.#.#.#...#.#.#.#.#.....#...#.#.....#.....#.....#.......#...#...#.#.#.........#...#...#.#.#...#.........#.#.#.#  ",
				"  #.#########.###.#.#######.#.#######.#####.###.#####.#.###.#.#####.#.###.#.###.#.###.###.###.###.#####.#########.###.###.#.#  ",
				"  #.....#.......#.#.#.....#.#.#.#.#.#.#...#...#...#...#.#...#.#.#...#...#.#...#.#.#.#...#...#.#.....#...........#...#.......#  ",
				"  #.#.#######.#####.#####.#.#.#.#.#.###.#.#.###.#####.#####.###.#.#######.###.#.###.#.#.#############.#.###.#.#.#######.#####  ",
				"  #.#...#...#.#.....#.........#.........#.#...#...#.......#...#.....#.#...#.....#.#...#...........#.#.#...#.#.#.......#.....#  ",
				"  #.#####.#####.#.#########.###.#.###.###.#.###.#.###.###.#.#######.#.#.###.#####.###.#.#.#.#.#.#.#.###.###.###.###.#########  ",
				"  #.#...#.#.#...#.#.....#.....#.#...#.#.#.....#.#...#.#.#...#.#...#...#...#.....#.#...#.#.#.#.#.#.....#...#...#.#.....#...#.#  ",
				"  #.###.#.#.###.###.#####.###.###.###.#.#########.#####.###.#.#.#.#.###.#.###.###.###.#.#####.###.#.###.###.###.#####.#.###.#  ",
				"  #.#...........#.....#.#.#.#...#.#...#.....#.....#.#.#...#...#.#.....#.#.#.........#.#...#...#.#.#.#...#.....#...#.........#  ",
				"  #.###.#########.#.#.#.###.#.#######.###.#.###.###.#.###.#.#####.#.#####.#####.#######.#######.#######.###.#.#.#.#.#.###.#.#  ",
				"  #.#.....#.......#.#.................#...#...#.....#.......#.....#...#.....#.#.#.#.#...#.........#.......#.#.#.#.#.#.#...#.#  ",
				"  #.#######.#.###.#.#.###.#.#.#.###.#.#.###.#######.#.#############.###.#####.#.#.#.###.#.#####.#.###.###.#####.#.###.#####.#  ",
				"  #.#.......#.#...#.#.#...#.#.#.#...#...#...#.......#.........#.....#.........#.#.............#.#.#.....#...#...#...#...#...#  ",
				"  #########################################.#.###########.#######.###.###.#####.###.#########################################  ",
				"                                           I I           J       W   K   A     U   F                                           ",
				"                                           F C           J       P   N   A     S   X                                           ",
			},
			626,
		},
	}
	for i, tt := range tests {
		t.Run(fmt.Sprintf("Test_%d", i), func(t *testing.T) {
			m := New(tt.maze)
			if got := m.MinSteps(); got != tt.want {
				t.Errorf("MinSteps() = %v, want %v", got, tt.want)
			}
		})
	}
}
